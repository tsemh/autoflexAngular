<div class="container mt-4">
  <h2>Production Suggestions</h2>
  <div class="mb-3">
    <button class="btn btn-outline-primary" (click)="fetchSuggestions()">Atualizar</button>
  </div>
  <div *ngIf="loading" class="alert alert-info">Carregando sugestões...</div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
  <div *ngIf="products && products.length > 0">
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Produto</th>
          <th>Quantidade Sugerida</th>
          <th>Valor Unitário</th>
          <th>Valor Total</th>
        <th>Matérias-primas e Quantidades</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of products; let i = index"
          [ngClass]="{
            'table-success': i === 0,
            'table-warning': i === 1,
            'table-orange': i === 2
          }">
        <td>{{ product.name }}</td>
        <td>{{ product.quantity }}</td>
        <td>{{ product.value | currency }}</td>
        <td>{{ product.total | currency }}</td>
        <td>
          <ul class="mb-0">
            <li *ngFor="let mat of product.materials">
              {{ mat.name }}: {{ mat.quantityRequired }}
            </li>
          </ul>
        </td>
      </tr>
    </tbody>
    </table>
    <div class="mt-3"><strong>Valor Total:</strong> {{ totalValue | currency }}</div>
  </div>
  <div *ngIf="products && products.length === 0 && !loading">
    <div class="alert alert-info">Nenhuma sugestão disponível.</div>
  </div>
</div>
